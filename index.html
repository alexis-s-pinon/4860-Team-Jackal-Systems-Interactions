<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light">
  <title>Systems Interactions</title>
  <link rel="icon" type="image/x-icon" href="img/favicon.ico">
  <style>
    /* ===== Terracotta & Sand (no gradient text) ===== */
    :root {
      --primary: #E8AF62;
      /* ochre (from the image) */
      --secondary: #687F8E;
      /* deep slate/navy */
      --accent: #74DBEB;
      /* cyan highlight */
      --quaternary: #B45309;
      /*Home button red*/
      --bg: #FFFBF5;
      /* sand background */
      --fg: #1F2937;
      /* slate-800 text */
      --muted: #F5EDE3;
      /* warm muted */
      --border: #EADAC7;
      /* sand-stroke */
      --shadow: 0 10px 25px rgba(124, 45, 18, .14);
      --stickyH: 0px;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0F0E0C;
        --fg: #E5E7EB;
        --muted: #1B1A17;
        --border: #292724;
      }
    }

    /* ===== Base ===== */
    * {
      box-sizing: border-box
    }

    html,
    body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--fg);
      font: 16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif
    }

    img {
      max-width: 100%;
      display: block
    }

    a {
      color: inherit;
      text-decoration: none
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 1rem
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0
    }

    .visually-focusable:focus {
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 100;
      background: var(--bg);
      border: 1px solid var(--border);
      padding: .5rem .75rem;
      border-radius: .5rem
    }

    /* ===== Header / Nav ===== */
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(255, 251, 245, .8);
      backdrop-filter: saturate(1.2) blur(6px);
      border-bottom: 1px solid var(--border);
      transition: box-shadow .2s ease
    }

    @media (prefers-color-scheme: dark) {
      header {
        background: rgba(15, 14, 12, .6)
      }
    }

    header.shadow {
      box-shadow: var(--shadow)
    }

    .nav-row {
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between
    }

    .brand {
      display: flex;
      align-items: center;
      gap: .5rem
    }

    .brand-mark {
      height: 28px;
      width: 28px;
      border-radius: .5rem;
      background: var(--primary)
    }

    .desktop-nav {
      display: none;
      gap: 1.25rem;
      align-items: center
    }

    .desktop-nav a {
      font-size: .95rem;
      opacity: .9
    }

    .desktop-nav a.active {
      font-weight: 700;
      opacity: 1
    }

    .desktop-nav a:hover {
      opacity: 1;
      text-decoration: underline;
      text-underline-offset: 3px
    }

    .mobile-toggle {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--border);
      padding: .4rem .6rem;
      border-radius: .5rem;
      background: transparent
    }

    .mobile-drawer {
      display: none;
      border-top: 1px solid var(--border);
      padding: .75rem 0
    }

    .mobile-drawer.open {
      display: block
    }

    @media (min-width:768px) {
      .desktop-nav {
        display: flex
      }

      .mobile-toggle {
        display: none
      }

      .mobile-drawer {
        display: none !important
      }
    }

    /* Hide default header; CTA row will act as sticky header */
    header {
      display: none !important
    }

    /* ===== Scrollytelling Layout ===== */
    .stage {
      position: relative
    }

    .section {
      min-height: 100vh;
      display: block;
      position: relative
    }

    .panel {
      position: sticky;
      top: var(--stickyH);
      min-height: calc(100vh - var(--stickyH));
      display: flex;
      align-items: center
    }

    .panel-inner {
      width: 100%;
      display: grid;
      gap: 1rem
    }

    .fadeable {
      transition: opacity .6s ease, transform .6s ease
    }

    .is-dimmed .fadeable {
      opacity: .2;
      transform: translateY(4px);
      pointer-events: none
    }

    .is-current .fadeable {
      opacity: 1;
      transform: none;
      pointer-events: auto
    }

    /* Cards & UI */
    .card {
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 1.75rem;
      background: #fff;
      box-shadow: none;
      transition: box-shadow .2s ease, border-color .2s ease
    }

    .card:hover {
      box-shadow: var(--shadow)
    }

    .row {
      display: flex;
      gap: .75rem;
      align-items: flex-start;
      margin-bottom: .75rem
    }

    .icon-box {
      height: 48px;
      width: 48px;
      border-radius: .8rem;
      background: color-mix(in oklab, var(--primary) 12%, transparent);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: .75rem;
      flex: 0 0 auto
    }

    .muted {
      opacity: .9
    }

    .three-col {
      display: grid;
      gap: 1.2rem
    }

    @media (min-width:768px) {
      .three-col {
        grid-template-columns: repeat(3, 1fr)
      }
    }

    /* spacing md+ */
    @media (min-width:768px) {
      .card {
        padding: 2rem
      }
    }

    .eyebrow {
      display: inline-block;
      padding: .25rem .75rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: white;
      color: var(--primary);
      font-weight: 700;
      font-size: .9rem;
      margin-bottom: .5rem
    }

    .eyebrow.secondary {
      color: var(--secondary)
    }

    .eyebrow.accent {
      color: var(--accent)
    }

    h2 {
      font-size: clamp(1.6rem, 1.2vw + 1.2rem, 2.25rem);
      margin: .25rem 0 1rem 0
    }

    .section-title {
      font-size: clamp(1.8rem, 1.4vw + 1.2rem, 2.4rem);
      font-weight: 800;
      margin: .25rem 0 1rem 0
    }

    .section-title.primary {
      color: var(--primary)
    }

    .section-title.secondary {
      color: var(--secondary)
    }

    .section-title.accent {
      color: var(--accent)
    }

    .btn.secondary {
      background: var(--secondary);
      border-color: var(--secondary);
      color: white
    }

    .btn.accent {
      background: var(--accent);
      border-color: var(--accent);
      color: white
    }

    .btn.quaternary {
      background: #B45309;
      border-color: #B45309;
      color: white
    }

    /* warm copper */

    /* Hero / Headline tweak (soft highlight pill) */
    .hero {
      background: color-mix(in oklab, var(--muted) 40%, transparent);
      padding: 2.4rem 0 2.4rem
    }

    .hero h1 {
      font-size: clamp(2rem, 4vw + 1rem, 3.4rem);
      line-height: 1.1;
      margin: 0 0 .75rem 0;
      color: color-mix(in oklab, var(--primary) 38%, var(--fg));
    }

    .btns {
      display: flex;
      gap: .6rem;
      flex-wrap: wrap;
      margin: .6rem 0
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .7rem 1rem;
      border-radius: .6rem;
      border: 1px solid var(--border);
      font-weight: 600
    }

    .btn.primary {
      background: var(--primary);
      border-color: var(--primary);
      color: white
    }

    .btn.ghost {
      background: transparent
    }

    /* Sticky CTA bar (full-width) */
    #sticky-cta-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      opacity: 0;
      transform: translateY(-8px);
      pointer-events: none;
      background: rgba(255, 251, 245, .95);
      backdrop-filter: saturate(1.1) blur(6px);
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow);
      transition: opacity .28s ease, transform .28s ease
    }

    #sticky-cta-bar.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto
    }

    #sticky-cta-bar .btns {
      display: flex;
      gap: .55rem;
      flex-wrap: wrap;
      padding: .5rem 0
    }

    #sticky-cta-bar .home-link {
      display: inline-flex
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      background: color-mix(in oklab, var(--muted) 40%, transparent);
      padding: 2.5rem 0;
      margin-top: 2rem
    }

    .footer-grid {
      display: grid;
      gap: 1.2rem
    }

    @media (min-width:768px) {
      .footer-grid {
        grid-template-columns: repeat(4, 1fr)
      }
    }

    .small {
      font-size: .9rem
    }

    .underline:hover {
      text-decoration: underline;
      text-underline-offset: 3px
    }

    /* ===== Force LIGHT mode regardless of OS setting ===== */
    :root {
      color-scheme: light;
    }

    /* UA widgets use light styling */

    @media (prefers-color-scheme: dark) {

      /* Put your LIGHT values back during dark mode */
      :root {
        --bg: #FFFBF5;
        --fg: #1F2937;
        --muted: #F5EDE3;
        --border: #EADAC7;
        /* keep your brand colors as-is (e.g., --primary/--accent/etc.) */
      }

      /* If your header was overridden in dark mode, reset it */
      header {
        background: rgba(255, 251, 245, .8) !important;
      }

      body {
        background: var(--bg);
        color: var(--fg);
      }
    }

    /* === Two Truths & a Lie (Truth vs. Lie sorter) === */
    .ttal {
      margin-top: 1rem;
    }

    .ttal .zones {
      display: grid;
      gap: 1rem;
      grid-template-columns: 1fr;
    }

    @media (min-width:768px) {
      .ttal .zones {
        grid-template-columns: 1fr 1fr;
      }
    }

    .ttal .zone {
      border: 2px dashed var(--border);
      border-radius: 1rem;
      min-height: 140px;
      padding: 1rem;
      background: color-mix(in oklab, var(--muted) 65%, transparent);
      display: grid;
      grid-auto-rows: minmax(44px, auto);
      gap: .5rem;
      align-content: start;
      transition: border-color .15s ease, background .15s ease;
    }

    .ttal .zone:hover {
      border-color: color-mix(in oklab, var(--primary) 40%, var(--border));
    }

    .ttal .zone h3 {
      margin: .25rem 0 .5rem 0;
      font-size: 1.05rem;
    }

    .ttal .helper {
      font-size: .85rem;
      opacity: .75;
    }

    .ttal .pool {
      display: grid;
      gap: .5rem;
      grid-template-columns: 1fr;
    }

    @media (min-width:768px) {
      .ttal .pool {
        grid-template-columns: 1fr 1fr 1fr;
      }
    }

    .ttal .cardlet {
      border: 1px solid var(--border);
      border-radius: .75rem;
      padding: .75rem;
      background: #fff;
      cursor: grab;
      user-select: none;
      transition: box-shadow .15s ease, transform .1s ease;
      white-space: pre-wrap;
      position: relative;
    }

    .ttal .cardlet:active {
      cursor: grabbing;
      transform: scale(.99);
    }

    .ttal .cardlet.dragging {
      opacity: .85;
      box-shadow: var(--shadow);
    }

    .ttal .zone.drop-ok {
      background: color-mix(in oklab, var(--primary) 12%, white);
    }

    .ttal .zone.shake {
      animation: ttal-shake .3s linear 1;
    }

    @keyframes ttal-shake {

      0%,
      100% {
        transform: translateX(0)
      }

      25% {
        transform: translateX(-3px)
      }

      75% {
        transform: translateX(3px)
      }
    }

    .ttal .controls {
      display: flex;
      gap: .5rem;
      flex-wrap: wrap;
      margin-top: .75rem;
    }

    .ttal .controls .spacer {
      flex: 1 1 auto;
    }

    .ttal .badge {
      display: inline-grid;
      place-items: center;
      border-radius: .5rem;
      padding: .15rem .5rem;
      font-size: .82rem;
      font-weight: 700;
    }

    .ttal .cardlet .mark {
      position: absolute;
      top: 6px;
      right: 8px;
      font-weight: 800;
      font-size: .9rem;
      padding: .05rem .35rem;
      border-radius: .35rem;
      background: #fff;
      box-shadow: 0 1px 2px rgba(0, 0, 0, .06);
    }

    /* Reveal states */
    .ttal.reveal .zone.truth .cardlet[data-lie="0"] {
      border-color: var(--accent);
      background: color-mix(in oklab, var(--accent) 10%, #fff);
    }

    .ttal.reveal .zone.lie .cardlet[data-lie="1"] {
      border-color: var(--accent);
      background: color-mix(in oklab, var(--accent) 10%, #fff);
    }

    .ttal.reveal .zone.truth .cardlet[data-lie="1"],
    .ttal.reveal .zone.lie .cardlet[data-lie="0"] {
      border-color: color-mix(in oklab, var(--quaternary, #64748B) 55%, transparent);
      background: color-mix(in oklab, var(--quaternary, #64748B) 10%, #fff);
    }

    .ttal .finale {
      margin-top: 1rem;
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 1.25rem;
      background: #fff;
      text-align: center;
    }

    /* === Case Study: newspaper-style image float === */
    .case-flow::after {
      content: "";
      display: table;
      clear: both;
    }

    /* clearfix */

    .float-figure {
      float: right;
      width: clamp(260px, 38%, 460px);
      /* responsive width on desktop */
      margin: 0 0 .75rem 1rem;
      /* space below & to the left */
      border: 1px solid var(--border);
      border-radius: 1rem;
      overflow: hidden;
      background: #fff;
    }

    .float-figure img {
      width: 100%;
      height: auto;
      display: block;
    }

    .float-figure figcaption {
      padding: .5rem .75rem;
    }

    /* Stack on small screens */
    @media (max-width: 959px) {
      .float-figure {
        float: none;
        width: 100%;
        margin: 0 0 .75rem 0;
      }
    }

    /* clearfix */

    .float-figure-lft {
      float: left;
      width: clamp(260px, 38%, 460px);
      /* responsive width on desktop */
      margin: 0 1rem .75rem 0;
      /* space below & to the left */
      border: 1px solid var(--border);
      border-radius: 1rem;
      overflow: hidden;
      background: #fff;
    }

    .float-figure img {
      width: 100%;
      height: auto;
      display: block;
    }

    .float-figure figcaption {
      padding: .5rem .75rem;
    }

    /* Stack on small screens */
    @media (max-width: 959px) {
      .float-figure {
        float: none;
        width: 100%;
        margin: 0 0 .75rem 0;
      }
    }


    /* === Framework Gallery (namespaced & safe) === */
    .fwGallery {
      max-width: 960px;
      margin: 1.25rem auto;
    }

    .fwGallery .fw-title {
      margin: .25rem 0 .5rem 0;
      font-size: 1.35rem
    }

    .fwGallery .fw-viewport {
      position: relative;
      border: 1px solid var(--border, #ddd);
      border-radius: 1rem;
      overflow: hidden;
      background: #fff
    }

    .fwGallery .fw-track {
      display: flex;
      transition: transform .45s ease;
      transform: translateX(0)
    }

    .fwGallery .fw-slide {
      flex: 0 0 100%;
      margin: 0;
      display: grid;
      grid-template-rows: 1fr auto;
      min-height: 0
    }

    .fwGallery .fw-imgWrap {
      aspect-ratio: 16/9;
      display: grid;
      place-items: center;
      background: var(--muted, #f6f6f6)
    }

    .fwGallery img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      display: block
    }

    .fwGallery figcaption {
      padding: .5rem .75rem
    }

    .fwGallery .fw-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      margin-top: .5rem
    }

    .fwGallery .fw-arrow {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border: 1px solid var(--border, #ddd);
      border-radius: .5rem;
      background: #fff
    }

    .fwGallery .fw-arrow:disabled {
      opacity: .4;
      cursor: not-allowed
    }

    .fwGallery .fw-dots {
      display: flex;
      gap: 6px
    }

    .fwGallery .fw-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--border, #ddd)
    }

    .fwGallery .fw-dot[aria-current="true"] {
      background: var(--primary, #2a9d8f)
    }

    .fwGallery .fw-blurb {
      margin-top: .5rem
    }

    /* === Fit images to the carousel window === */

    /* Choose the frame ratio once, gallery-wide */
    .fwGallery {
      --fw-ratio: 16/9;
    }

    /* try 4/3 or 3/2 if it feels taller/narrower on your page */

    /* The visible image “window” */
    .fwGallery .fw-imgWrap {
      aspect-ratio: var(--fw-ratio);
      width: 100%;
      padding: 8px;
      /* small breathing room around the image */
      background: var(--muted, #f6f6f6);
    }

    /* Force each image to stay inside that window */
    .fwGallery .fw-imgWrap img {
      width: 100% !important;
      height: 100% !important;
      object-fit: contain;
      /* show the whole image, no cropping */
      display: block;
    }

    /* Optional: on small screens use a taller window so details stay readable */
    @media (max-width: 640px) {
      .fwGallery {
        --fw-ratio: 4/3;
      }
    }

    /* === Fit-to-image mode (auto-height per slide) === */
    .fwGallery .fw-viewport {
      height: auto;
      /* JS will set height explicitly */
      transition: height .35s ease;
    }

    .fwGallery .fw-slide {
      display: grid;
      grid-template-rows: auto auto;
      /* image area + caption; no forced stretch */
    }

    .fwGallery .fw-imgWrap {
      aspect-ratio: auto;
      /* stop forcing a fixed ratio */
      padding: 0;
      /* optional: remove inner padding */
      background: var(--muted, #f6f6f6);
    }

    .fwGallery .fw-imgWrap img {
      width: 100% !important;
      height: auto !important;
      /* scale by width, keep native aspect */
      object-fit: contain;
      display: block;
    }


    /* === Compact mode for the Framework Gallery === */
    .fwGallery.compact {
      /* Tweak these to taste */
      --fw-max-w: 820px;
      /* was ~960px */
      --fw-vh: 58vh;
      /* max height of the image+caption area */
    }

    .fwGallery.compact {
      max-width: min(var(--fw-max-w), 92vw);
      margin: .75rem auto;
    }

    .fwGallery.compact .fw-title {
      font-size: 1.15rem;
      margin: .25rem 0 .35rem;
    }

    .fwGallery.compact .fw-viewport {
      border-radius: .75rem;
      max-height: var(--fw-vh);
      transition: height .35s ease;
    }

    .fwGallery.compact .fw-controls {
      margin-top: .35rem;
    }

    .fwGallery.compact .fw-arrow {
      width: 32px;
      height: 32px;
    }

    .fwGallery.compact .fw-dot {
      width: 7px;
      height: 7px;
    }

    .fwGallery.compact figcaption,
    .fwGallery.compact .fw-blurb {
      font-size: .95rem;
    }

    .fwGallery.compact .fw-blurb {
      margin-top: .35rem;
    }

    /* Make the image always fit inside the capped viewport */
    .fwGallery.compact .fw-imgWrap {
      /* no fixed aspect; let JS/height cap control it */
      aspect-ratio: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--muted, #f6f6f6);
      padding: 0;
      height: 100%;
    }

    .fwGallery.compact .fw-imgWrap img {
      max-width: 100%;
      max-height: 100%;
      width: auto;
      /* scale by height if needed */
      height: auto;
      object-fit: contain;
      display: block;
    }
  </style>


</head>

<body>
  <a class="sr-only visually-focusable" href="#main">Skip to content</a>

  <!-- Header -->
  <header id="site-header">
    <div class="container nav-row">
      <a href="#top" class="brand">
        <div class="brand-mark"></div><strong>Systems Interactions</strong>
      </a>
      <nav class="desktop-nav" aria-label="Primary">
        <a href="#concept">Understanding the Concept</a>
        <a href="#application">Practical Application</a>
        <a href="#framework">Visualize the Framework</a>
      </nav>
      <button class="mobile-toggle" id="mobile-toggle" aria-expanded="false" aria-controls="mobile-drawer">☰</button>
    </div>
    <div class="mobile-drawer" id="mobile-drawer" role="dialog" aria-modal="true">
      <div class="container">
        <div style="display:grid;gap:.5rem">
          <a href="#concept" class="underline">Understanding the Concept</a>
          <a href="#application" class="underline">Practical Application</a>
          <a href="#framework" class="underline">Visualize the Framework</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero (Intro) -->
  <section id="top" class="hero">
    <div class="container">
      <h1>Recognize, Evaluate, and Respond to System Interactions</h1>
      <center>
        <p class="lead"><img src="img/system-thinking.gif" width="1440px" height="auto" center>
      </center>
      </p>
      <div class="btns" id="cta-row">
        <a class="btn primary" href="#concept">Understanding the Concept</a>
        <a class="btn secondary" href="#application">Practical Application</a>
        <a class="btn accent" href="#framework">Visualize the Framework</a>
        <a class="btn quaternary home-link" href="#top" style="display:none">Home</a>

      </div>
    </div>
    <br>
    <!-- PMI Definition -->
    <div class="container" style="margin-top:1rem">
      <article class="card">
        <div class="row">
          <h3 style="margin:.25rem 0 0 0">PMI Principle: Recognize, evaluate, and respond to system interactions</h3>
        </div>
        <div class="muted">
          <p>Acknowledge that projects are part of larger systems and are influenced by both internal and external
            factors. Constantly evaluate how project elements
            interact with each other and with external systems to optimize performance.</p>
        </div>
      </article>
    </div><br>
  </section>

  <!-- Scrollytelling Stage -->
  <main id="main" class="stage">
    <!-- Concept Section -->
    <section id="concept" class="section is-current"><br>
      <div class="panel">
        <div class="container panel-inner fadeable">

          <div style="text-align:center;margin:16px 0">
            <h2 class="section-title primary">Understanding the Concept</h2>
          </div>

          <!-- Definition -->
          <article class="card">
            <div class="row">
              <!--div class="icon-box">📖</div-->
              <h3 style="margin:.25rem 0 0 0">Definition</h3>
            </div>
            <div class="muted">
              <p>System Interactions in Project Management refers to the principle of recognizing that all project
                components are connected. Effective project managers
                must identify these dependencies to anticipate how changes in one area will impact others, and
                proactively manage effects to maintain the project's
                integrity.</p>
              <p>Projects sit inside larger ecosystems that includes teams, organizations, markets, and regulations.
                Internal choices such as scope, resources, and
                processes interact with external forces like users, partners, and policies. The goal is to understand
                these interactions and steer toward desired outcomes.</p>
            </div>
          </article>

          <!-- Interview -->
          <!--article class="card" style="margin-top:1rem;background:color-mix(in oklab, var(--muted) 40%, white)"-->
          <br>
          <article>
            <div class="row">
              <!--div class="icon-box" style="background:var(--secondary);color:white">👥</div-->
              <div>
                <br>
                <h3 style="margin:.25rem 0 0 0">A Professional's Experience</h3><br>
                <center>
                  <div class="case-flow">
                    <figure class="float-figure-lft" style="width: 150px;">
                      <img src="img/andrew-naguib.jfif">
                    </figure>
                </center>
                <div>
                  <h4 class="small muted">Andrew Naguib: <br>Technical Service Engineer at Pure Storage</h4>
                  <p></p>
                  <p class="small muted">Andrew's work invloves focusing on service and data storage servers and arrays
                    from regular maintenance to troubleshooting.
                    He mainly focuses on working with customer and technical system information.</p>
                </div>
                <div style="display:flex;justify-content:left;margin:1rem 0">
                  <a class="btn primary"
                    href="https://drive.google.com/file/d/1ZIaQEv6GPTbyUZjMyOXOG9CNL-1VjuSw/preview" target="_blank"
                    rel="noopener">
                    Click Here to Watch the Full Interview
                  </a>
                </div>

              </div>
              <blockquote style="border-left:4px solid var(--primary);padding-left:1rem;margin:1rem 0">
                <p><strong>Internal and External Interactions</strong></p>
                <p><em><strong>Big Picture Thinking:</strong> If there is any disaster or disturbance to my work, it
                    will be affected by that. For example, an unexpected power outage. Because of that, we must be very
                    resilient and proactive with the rest of the teams, such as extensive communications, to deliver the
                    best customer experiences considering the uncontrollable external circumstances.</em></p>
                <p><em><strong>Spotting Interactions:</strong> When one part of my work affects another, I consider it a
                    regular part of being within the computer or technology sector. I keep track of it by thinking of it
                    as to how any small changes and any small steps that you take daily are all part of the same greater
                    system, and the best way to track it is to understand your role.</em></p>
                <p><em><strong>Responding to Changes:</strong> When uncontrollable external circumstances or changes
                    affect my work, I adapt by making it as good an experience for myself as I can. This is because in
                    your work, you’re always expected to find a solution to a problem, and you always adapt and work
                    around it. You can ask for help, but it is ultimately up to you to confirm and put in the
                    effort.</em></p>
                <p><em><strong>Management Lessons learned from Interdependent and Connected Work:</strong> Know that you
                    are not a small weed within a forest, and that you exist within an interconnected network or
                    community. Always give it the best that you can, while not disregarding your own efforts, since it
                    will affect a lot of other people and it will make a difference.</em></p>
              </blockquote>
          </article>
        </div>
      </div>
    </section>

    <!-- Application Section -->
    <section id="application" class="section is-dimmed"><br>
      <div class="panel">
        <div class="container panel-inner fadeable">
          <div style="text-align:center;margin:16px 0">
            <h2 class="section-title secondary">Practical Application</h2>
          </div>

          <!--article class="card"-->
          <article>


            <div class="row">
              <!--div class="icon-box" style="background:color-mix(in oklab, var(--accent) 12%, transparent)">💡</div-->
              <h3 style="margin:.25rem 0 0 0"><a
                  href="https://openlearning.mit.edu/news/seven-innovators-who-used-systems-thinking-bring-big-ideas-life">Real-World
                  Example: Dyson and the Dual-Cyclone Vacuum</a></h3>
            </div>
            <div style="display:grid;gap:1.25rem">
              <div>
                <h4 style="margin:.25rem 0">Context</h4>
                <p class="muted" style="margin-left: 2rem;">Sir James Dyson used systems thinking to bring innovative
                  ideas to life. He has created machines like the bagless vacuum, bladeless fan, and high-speed hand
                  dryers through his questioning of what are the limitations and opportunities of standard applicances.
                </p>
              </div>
              <div>
                <h4 style="margin:.25rem 0">System Interactions</h4><br>
                <div class="three-col">
                  <div class="card" style="padding:1rem;background:color-mix(in oklab, var(--secondary) 10%, white)">
                    <p style="color:var(--quaternary);font-weight:700;margin:.25rem 0">Internal Factors</p>
                    <p class="small muted">He began by looking at what kinds of vacuums were available and how they
                      worked. This primarily consisted of his own negative experience with losing suction when using
                      traditional vacuums.</p>
                  </div>
                  <div class="card" style="padding:1rem;background:color-mix(in oklab, var(--secondary) 10%, white)">
                    <p style="color:var(--accent);font-weight:700;margin:.25rem 0">External Factors</p>
                    <p class="small muted">He then looked for inspiration in areas that he was familiar with. His main
                      source of inspiration was aerodynamics, where he said "small changes can lead to large nonlinear
                      effects".</p>
                  </div>
                  <div class="card" style="padding:1rem;background:color-mix(in oklab, var(--secondary) 10%, white)">
                    <p style="color:var(--primary);font-weight:700;margin:.25rem 0">Interactions</p>
                    <p class="small muted">By relying on systems thinking, Dyson was able to expand beyond traditional
                      designs and reimagine how air could be moved.</p>
                  </div>
                </div>
              </div>
              <div>
                <div class="case-flow">
                  <figure class="float-figure">
                    <a href=https://www.intelligencenode.com/blog/dyson-ai-dtc-success-story-on-digital-channels /><img
                      src="img/dyson-products.jpg"
                      alt="Aerial view of flood damage along the Coquihalla Highway in British Columbia"
                      loading="lazy"></a>
                  </figure>
                  <div>
                    <h4 style="margin:.25rem 0">Outcome</h4>
                    <p class="muted" style="margin-left: 2rem;">The result of Dyson’s systems thinking was a quick rise
                      to
                      being a leader in innovative appliances, with technology like the Dual-Cyclone vacuum.
                      Additionally, Dyson has become a household name and gains billions of dollars in revenue each year
                      from the company's wide variety of innovative products.
                    </p>
                  </div>
                </div>
          </article><br><br>

          <!--article class="card" style="margin-top:1rem;background:color-mix(in oklab, var(--muted) 35%, white)"-->
          <article class="card">

            <div class="row">
              <!--div class="icon-box">🗎</div-->
              <h3 style="margin:.25rem 0 0 0"><a
                  href="https://www.pmi.org/business-solutions/case-studies/reconnecting-roads-after-massive-flooding">Case
                  Study: Reconnecting Roads After Massive Flooding</a></h3>
            </div>
            <!--div style="display:grid;gap:1.25rem"-->
            <div class="case-flow">
              <figure class="float-figure">
                <img src="img/bc-canada-highway.png"
                  alt="Aerial view of flood damage along the Coquihalla Highway in British Columbia" loading="lazy">
                <figcaption class="small muted">Coquihalla Highway, BC, Canada — Flood Aftermath</figcaption>
              </figure>
              <div>
                <div class="row">
                  <div class="icon-box"
                    style="height:32px;width:32px;border-radius:999px;background:color-mix(in oklab, var(--secondary) 18%, transparent);color:var(--secondary);font-weight:800;justify-content:center">
                    1</div>
                  <h4 style="margin:.25rem 0">The Problem</h4>
                </div>
                <p class="muted" style="padding-left:2.25rem">A unique weather event called an atmospheric river flowed
                  across the province of British Columbia, Canada leaving
                  destruction in its wake. Towns were cut off; travelers were stranded and unable to get home; a
                  struggling supply chain was further crippled due to no commercial
                  traffic. The Ministry of Transportation and Infrastructure decided Highway 5 was the critical linkage
                  between the interior and commercial traffic.</p>
              </div>
              <div>
                <div class="row">
                  <div class="icon-box"
                    style="height:32px;width:32px;border-radius:999px;background:color-mix(in oklab, var(--secondary) 18%, transparent);color:var(--secondary);font-weight:800;justify-content:center">
                    2</div>
                  <h4 style="margin:.25rem 0">The Approach</h4>
                </div>
                <div style="padding-left:2.25rem">
                  <p class="muted">They used PMI project life cycle based on the PMBOK Guide as the foundation, but
                    customized it to meet the unique needs of their projects and
                    repairs. Ultimately, they came to the same conclusion that “the Coquihalla is a project” and
                    “looking at each cleanup or washout as one part of the whole
                    project” they were able to unify in their goal. Schimpf, Weicker, and their team remained flexible
                    and adaptable to situations that continued impacting their
                    efforts (i.e. snow, atmospheric river, thickness of asphalt that was being put down).</p>
                </div>
              </div>
              <div>
                <div class="row">
                  <div class="icon-box"
                    style="height:32px;width:32px;border-radius:999px;background:color-mix(in oklab, var(--secondary) 18%, transparent);color:var(--secondary);font-weight:800;justify-content:center">
                    3</div>
                  <h4 style="margin:.25rem 0">The Outcome</h4>
                </div>
                <div style="padding-left:2.25rem;display:grid;gap:1rem">
                  <p class="muted">Thanks to Schimpf's project management focus and Weicker's engineering background,
                    together they were able to stay on site and face
                    problems that arose head on. The highway 5 team had more than 300 people working 24 hours a day
                    including stakeholders such as government parties,
                    vendors, and suppliers who came together to complete the project in the 5-week deadline,
                    strengthening the existing relationships within the construction
                    industry.</p>
                  <div class="three-col" style="justify-items:center; max-width:760px; margin:0 auto;">
                    <div class="stat">
                      <div style="font-weight:800;font-size:1.6rem;color:var(--quaternary)">300 people </div>
                      <div class="small muted">and 200 pieces of equipment<br>plus 24-hour a-day work</div>
                    </div>
                    <div class="stat">
                      <div style="font-weight:800;font-size:1.6rem;color:var(--accent)">35 days</div>
                      <div class="small muted">to complete the project</div>
                    </div>
                    <div class="stat">
                      <div style="font-weight:800;font-size:1.6rem;color:var(--primary)">0 safety incidents</div>
                      <div class="small muted">despite unfavorable weather conditions</div>
                    </div>
                  </div>
                </div>
              </div>
              <div><br>
                <figure class="float-figure">
                  <img src="img/fixed-highway.png"
                    alt="Aerial view of flood damage along the Coquihalla Highway in British Columbia" loading="lazy">
                  <figcaption class="small muted">Coquihalla Highway, BC, Canada — Highway Repaired</figcaption>
                </figure>
                <div class="row">
                  <div class="icon-box"
                    style="height:32px;width:32px;border-radius:999px;background:color-mix(in oklab, var(--secondary) 18%, transparent);color:var(--secondary);font-weight:800;justify-content:center">
                    4</div>
                  <h4 style="margin:.25rem 0">Lessons Learned</h4>
                </div>
                <div style="padding-left:2.25rem">
                  <p class="muted">Team Highway 5 was able to recognize, evaluate, and respond to the changing
                    conditions inside and outside the project, responding
                    comprehensively to enhance their performance in repairing the vital highway. They realized the
                    highway was the cornerstone of their project and worked as a
                    team to make sure the project was completed on schedule.</p>
                </div>
              </div><br><br><br>
              <div class="card" style="padding:1rem;background:color-mix(in oklab, var(--muted) 55%, white)">
                <p style="text-align:center;font-weight:700"><strong>Key Takeaway</strong><br>They realized that fixing
                  the highway was just one piece of the entire system
                  that would open up the <br>Port of Vancouver so that business could continue moving along as normal.
                </p>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- Framework Section -->
    <section id="framework" class="section is-dimmed"><br>
      <div class="panel">
        <div class="container panel-inner fadeable">
          <div style="text-align:center;margin:16px 0">
            <h2 class="section-title accent">Visualize the Framework</h2>
          </div>
          <!-- === Visualize the Framework: Visuals Carousel === -->
          <section id="fw-gallery" class="fwGallery" aria-label="Framework gallery">
            <h3 class="fw-title" aria-live="polite">Systems Thinking Overview</h3>
            <div class="fw-viewport" tabindex="0">
              <div class="fw-track">
                <figure class="fw-slide" data-title="Systems Thinking"
                  data-blurb="How project elements interact with each other and external systems.">
                  <div class="fw-imgWrap">
                    <img src="img/sys-thinking-visual.jpeg" alt="Systems Thinking overview infographic">
                  </div>
                  <figcaption class="small muted">Key relationships and why they matter.</figcaption>
                </figure>
                <figure class="fw-slide" data-title="How to Use Systems"
                  data-blurb="Practical moves: scan for patterns, zoom in/out, take small reversible steps, and favor foresight.">
                  <div class="fw-imgWrap">
                    <img src="img/how-to-use-systems-visual.jpeg"
                      alt="How to use systems thinking in business infographic">
                  </div>
                  <figcaption class="small muted">Ways to apply systems thinking.</figcaption>
                </figure>
                <figure class="fw-slide" data-title="Five Core Disciplines"
                  data-blurb="Senge’s model at a glance: Personal Mastery, Mental Models, Shared Vision, Team Learning, centered on Systems Thinking.">
                  <div class="fw-imgWrap">
                    <img src="img/five-core-disciplines-visual.jpeg"
                      alt="Systems thinking five core disciplines infographic">
                  </div>
                  <figcaption class="small muted">The 5 disciplines that support system-level work.</figcaption>
                </figure>
              </div>
            </div>
            <div class="fw-controls">
              <button type="button" class="fw-arrow" data-prev aria-label="Previous">‹</button>
              <div class="fw-dots" aria-label="Slide navigation"></div>
              <button type="button" class="fw-arrow" data-next aria-label="Next">›</button>
            </div>
            <!--p class="fw-blurb small muted">How project elements interact with each other and external systems —
              relationships that drive outcomes.</p-->
          </section>


          <!-- === Interactive Challenge: Two Truths & a Lie === -->
          <section id="ttal" class="card ttal" aria-label="Truth vs. Lie Challenge">
            <div style="text-align:center;margin:16px 0">
              <h2 class="section-title accent" style="margin:16px 0">Two Truths &amp; A Lie</h2>
              <h3>Drag each statement into the <strong>Truth</strong> or <strong>Lie</strong> box.
              </h3>
            </div>

            <!-- Top: Drop zones -->
            <div class="zones">
              <div class="zone truth" data-bucket="truth" aria-label="Truth drop zone">
                <h3>Truth</h3>
                <div class="helper small muted">Place <strong>two</strong> statements here</div>
              </div>
              <div class="zone lie" data-bucket="lie" aria-label="Lie drop zone">
                <h3>Lie</h3>
                <div class="helper small muted">Place <strong>one</strong> statement here</div>
              </div>
            </div>

            <!-- Bottom: Draggable choices -->
            <div style="margin-top:1rem">
              <div class="pool" id="ttal-pool" aria-label="Choices"></div>
            </div>

            <!-- Controls -->
            <div class="controls">
              <div class="badge small muted" id="ttal-round">Round 1 / 3</div>
              <div class="spacer"></div>
              <button type="button" class="btn" id="ttal-reset">Reset</button>
              <button type="button" class="btn primary" id="ttal-submit" disabled>Submit</button>
              <button type="button" class="btn accent" id="ttal-next" style="display:none">Next round</button>
            </div>

            <!-- Finale (hidden until you finish) -->
            <div id="ttal-finale" class="finale" style="display:none">
              <h3 style="margin:.25rem 0 0 0">All rounds complete!</h3>
              <!p class="small muted">Nice work</p>
                <button type="button" class="btn primary" id="ttal-replay">Play again?</button>
            </div>

            <!-- Data: your exact statements. Keep [FALSE] exactly as-is; it’s used internally. -->
            <script type="application/json" id="ttal-data">
  {
    "rounds": [
      {
        "id": "q1",
        "statements": [
          "System interactions in project management is viewing the sum of parts and understanding how they all fit together.",
          "[FALSE] Effective project managers do not need to take in account system interactions to lead a successful project.",
          "System interactions include internal choices like scope and resources, as well as external forces like users and partners."
        ]
      },
      {
        "id": "q2",
        "statements": [
          "Sir James Dyson used system thinking to bring new innovative technology to the market.",
          "Dyson used aerodynamics as a source of inspiration for his innovations.",
          "[FALSE] Dyson wanted to improve on the already effective designs available in the market."
        ]
      },
      {
        "id": "q3",
        "statements": [
          "[FALSE] A project was started by the province of British Columbia, Canada to strengthen roads in anticipation for floods.",
          "The team utilized a modified project life cycle and had a flexible stance to address unexpected situations.",
          "As a result of this stance, and understanding the big picture, the team was able to complete the project within the 5 week deadline."
        ]
      }
    ]
  }
  </script>

          </section>

        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-grid" style="justify-items:center; max-width:860px; margin:0 auto;">
        <div>
          <h3 style="margin:.25rem 0;color-mix(in oklab, var(--muted) 40%, transparent);">Systems Interactions</h3>
          <p class="small muted">Understanding how internal and external factors interact to shape outcomes.</p>
        </div>
        <nav class="small" aria-label="Footer"><br><br>
          <a class="underline" href="#concept">Understanding the Concept</a><br />
          <a class="underline" href="#application">Practical Application</a><br />
          <a class="underline" href="#framework">Visualize the Framework</a>
        </nav>
        <div class="small muted">
          <p><!--span id="year"></span--><br>Ryan Hwang<br>Alejandro Diaz<br>Jeremy Yan<br>Juan Talome<br>Alexis Pinon
          </p>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Year
    //document.getElementById('year').textContent = new Date().getFullYear();

    // Header shadow disabled; using sticky CTA instead
    const header = document.getElementById('site-header');
    const onScrollShadow = () => { if (window.scrollY > 8) header.classList.add('shadow'); else header.classList.remove('shadow'); };
    onScrollShadow(); window.addEventListener('scroll', onScrollShadow);

    // Mobile drawer
    const toggle = document.getElementById('mobile-toggle');
    const drawer = document.getElementById('mobile-drawer');
    toggle?.addEventListener('click', () => { const open = drawer.classList.toggle('open'); toggle.setAttribute('aria-expanded', String(open)); });
    drawer?.querySelectorAll('a').forEach(a => a.addEventListener('click', () => { drawer.classList.remove('open'); toggle.setAttribute('aria-expanded', 'false'); }));




    // Sticky CTA bar (full-width) logic
    const ctaRow = document.getElementById('cta-row');
    let stickyBar = document.getElementById('sticky-cta-bar');
    if (!stickyBar) {
      stickyBar = document.createElement('div');
      stickyBar.id = 'sticky-cta-bar';
      const inner = document.createElement('div');
      inner.className = 'container';
      const btns = document.createElement('div');
      btns.className = 'btns';

      // Collect clones, then insert home after the accent (blue) button
      const clones = [];
      let homeClone = null;
      let accentClone = null;
      if (ctaRow) {
        ctaRow.querySelectorAll('a').forEach((a) => {
          const b = a.cloneNode(true);
          b.style.display = ''; // remove inline display style if any
          if (b.classList.contains('home-link')) {
            b.textContent = 'Home';   // rename per request
            homeClone = b;
            return; // don't push yet; we'll insert after accent
          }
          if (b.classList.contains('accent')) accentClone = b;
          clones.push(b);
        });
      }
      // If we found both, insert home after accent; otherwise append at end
      if (homeClone) {
        if (accentClone) {
          const out = [];
          for (const c of clones) {
            out.push(c);
            if (c === accentClone) out.push(homeClone);
          }
          out.forEach(el => btns.appendChild(el));
        } else {
          clones.forEach(el => btns.appendChild(el));
          btns.appendChild(homeClone);
        }
      } else {
        clones.forEach(el => btns.appendChild(el));
      }

      inner.appendChild(btns);
      stickyBar.appendChild(inner);
      document.body.appendChild(stickyBar);
    }

    function updateStickyBar() {
      if (!ctaRow) return;
      const stuck = ctaRow.getBoundingClientRect().top <= 0;
      if (stuck) {
        stickyBar.classList.add('visible');
      } else {
        stickyBar.classList.remove('visible');
      }
      const h = stickyBar.classList.contains('visible') ? stickyBar.offsetHeight : 0;
      document.documentElement.style.setProperty('--stickyH', h + 'px');
    }
    updateStickyBar();
    window.addEventListener('scroll', updateStickyBar, { passive: true });
    window.addEventListener('resize', updateStickyBar);

    // Tabs in Framework


    const tabs = document.querySelectorAll('.tab');
    const panels = {
      overview: document.getElementById('view-overview'),
      internal: document.getElementById('view-internal'),
      external: document.getElementById('view-external'),
      interactions: document.getElementById('view-interactions'),
    };
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => { t.setAttribute('aria-selected', 'false'); t.style.background = 'transparent'; t.style.color = ''; });
        Object.values(panels).forEach(p => p.hidden = true);
        tab.setAttribute('aria-selected', 'true');
        tab.style.background = 'var(--primary)'; tab.style.color = 'white';
        const key = tab.dataset.tab;
        if (key && panels[key]) panels[key].hidden = false;
      });
    });

    // ===== Scrollytelling fade logic (distance-to-header) =====
    const sections = Array.from(document.querySelectorAll('.section'));
    const switchOffset = 500; // px — increase to switch later, decrease to switch sooner
    function updateCurrentSection() {
      const stickyH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--stickyH')) || 0;
      let best = null;
      let bestDist = Infinity;
      sections.forEach(s => {
        const rect = s.getBoundingClientRect();
        const dist = Math.abs(rect.top - stickyH);
        if (dist < bestDist) { bestDist = dist; best = s; }
      });
      // Gate the switch: only allow a new section to become current
      // once its top is within `switchOffset` px of the sticky bar.
      const current = document.querySelector('.section.is-current') || sections[0];
      if (best) {
        const candidateTop = best.getBoundingClientRect().top - stickyH;
        if (candidateTop > switchOffset) {
          best = current; // keep the current section until we get closer
        }
      }

      sections.forEach(s => {
        if (s === best) {
          s.classList.add('is-current');
          s.classList.remove('is-dimmed');
        } else {
          s.classList.remove('is-current');
          s.classList.add('is-dimmed');
        }
      });
    }
    // run on load and on scroll
    updateCurrentSection();
    window.addEventListener('scroll', updateCurrentSection, { passive: true });
    window.addEventListener('resize', updateCurrentSection);

  </script>
  <script>
    (function () {
      const anchorGap = 16; // space under the sticky bar; tweak to taste

      function readStickyH() {
        const cssVar = parseInt(getComputedStyle(document.documentElement)
          .getPropertyValue('--stickyH')) || 0;
        const stickyBar = document.getElementById('sticky-cta-bar');
        return Math.max(cssVar, stickyBar ? stickyBar.offsetHeight : 0);
      }

      // Wait until scrolling is "idle" (no movement) before snapping
      function waitForScrollIdle(cb, maxWait = 900) {
        let lastY = window.scrollY;
        let stillFrames = 0;
        const start = performance.now();

        function tick() {
          const y = window.scrollY;
          if (Math.abs(y - lastY) < 0.5) {
            stillFrames++;
          } else {
            stillFrames = 0;
          }
          lastY = y;

          const timedOut = performance.now() - start > maxWait;
          if (stillFrames >= 6 || timedOut) {
            cb();
          } else {
            requestAnimationFrame(tick);
          }
        }
        requestAnimationFrame(tick);
      }

      document.addEventListener('click', function (e) {
        const a = e.target.closest('a[href^="#"]');
        if (!a) return;

        const id = a.getAttribute('href').slice(1);
        if (!id) return;

        const target = document.getElementById(id);
        if (!target) return;

        e.preventDefault();

        // 1) Smooth scroll using current sticky height
        const stickyH0 = readStickyH();
        const y0 = target.getBoundingClientRect().top + window.scrollY - stickyH0 - anchorGap;
        window.scrollTo({ top: Math.max(0, y0), behavior: 'smooth' });

        // 2) After scroll settles, snap once if needed
        waitForScrollIdle(() => {
          const stickyH = readStickyH();
          const delta = target.getBoundingClientRect().top - stickyH - anchorGap;
          if (Math.abs(delta) > 1) {
            // Single micro-correction; 'auto' prevents canceling any ongoing smooth animation
            window.scrollBy({ top: delta, left: 0, behavior: 'auto' });
          }
        });
      });
    })();
  </script>
  <script>
    // === TTAL runtime (drag & drop + correctness + finale) ===
    (function () {
      const el = document.getElementById('ttal');
      if (!el) return;

      const pool = el.querySelector('#ttal-pool');
      const truthZone = el.querySelector('.zone.truth');
      const lieZone = el.querySelector('.zone.lie');
      const btnSubmit = el.querySelector('#ttal-submit');
      const btnReset = el.querySelector('#ttal-reset');
      const btnNext = el.querySelector('#ttal-next');
      const roundBadge = el.querySelector('#ttal-round');
      const finaleBox = el.querySelector('#ttal-finale');

      const dataTag = el.querySelector('#ttal-data');
      const rounds = dataTag ? (JSON.parse(dataTag.textContent).rounds || []) : [];
      let roundIndex = 0;
      let dragging = null;

      function shuffle(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }
      function parseStatements(list) {
        return list.map((raw, idx) => {
          const isLie = raw.trim().startsWith('[FALSE]');
          const text = isLie ? raw.replace(/^\[FALSE\]\s*/, '') : raw;
          return { id: `s-${roundIndex}-${idx}-${Math.random().toString(36).slice(2)}`, text, isLie };
        });
      }
      function clearAllCards() {
        el.querySelectorAll('.cardlet').forEach(n => n.remove());
      }
      function updateSubmitState() {
        const t = truthZone.querySelectorAll('.cardlet').length;
        const l = lieZone.querySelectorAll('.cardlet').length;
        btnSubmit.disabled = !(t === 2 && l === 1);
      }
      function buildCard(item) {
        const d = document.createElement('div');
        d.className = 'cardlet';
        d.draggable = true;
        d.textContent = item.text;
        d.dataset.lie = item.isLie ? '1' : '0';
        d.addEventListener('dragstart', (ev) => {
          dragging = d;
          d.classList.add('dragging');
          try { ev.dataTransfer.setData('text/plain', 'drag'); } catch { }
        });
        d.addEventListener('dragend', () => {
          dragging = null;
          d.classList.remove('dragging');
        });
        return d;
      }
      function canAccept(zone) {
        const cap = (zone === truthZone) ? 2 : 1;
        const count = zone.querySelectorAll('.cardlet').length;
        return count < cap;
      }
      function wireZone(zone) {
        zone.addEventListener('dragover', (ev) => {
          if (!dragging) return;
          if (canAccept(zone)) { ev.preventDefault(); zone.classList.add('drop-ok'); }
        });
        zone.addEventListener('dragleave', () => zone.classList.remove('drop-ok'));
        zone.addEventListener('drop', (ev) => {
          ev.preventDefault();
          zone.classList.remove('drop-ok');
          if (!dragging) return;
          if (canAccept(zone)) {
            zone.appendChild(dragging);
            updateSubmitState();
          } else {
            zone.classList.add('shake'); setTimeout(() => zone.classList.remove('shake'), 250);
          }
        });
      }
      function wirePool() {
        pool.addEventListener('dragover', (ev) => { if (dragging) ev.preventDefault(); });
        pool.addEventListener('drop', (ev) => {
          ev.preventDefault();
          if (dragging) { pool.appendChild(dragging); updateSubmitState(); }
        });
      }
      function resetRoundUI() {
        el.classList.remove('reveal');
        btnNext.style.display = 'none';
        btnSubmit.disabled = true;
        if (btnNext.textContent !== 'Next round') btnNext.textContent = 'Next round';
        el.querySelectorAll('.cardlet').forEach(c => {
          c.classList.remove('correct', 'incorrect');
          const mark = c.querySelector('.mark'); if (mark) mark.remove();
          c.style.outline = '';
        });
      }
      function renderRound(i) {
        resetRoundUI();
        clearAllCards();
        truthZone.innerHTML = '<h3>Truth</h3><div class="helper small muted">Place <strong>two</strong> statements here</div>';
        lieZone.innerHTML = '<h3>Lie</h3><div class="helper small muted">Place <strong>one</strong> statement here</div>';
        if (finaleBox) finaleBox.style.display = 'none';

        const r = rounds[i % rounds.length];
        const items = shuffle(parseStatements(r.statements.slice()));
        items.forEach(it => pool.appendChild(buildCard(it)));
        roundBadge.textContent = `Round ${i + 1} / ${rounds.length}`;
        updateSubmitState();
      }

      btnReset.addEventListener('click', () => renderRound(roundIndex));

      btnSubmit.addEventListener('click', () => {
        el.classList.add('reveal');
        const mark = (card, ok) => {
          card.classList.add(ok ? 'correct' : 'incorrect');
          const tag = document.createElement('span');
          tag.className = 'mark';
          tag.textContent = ok ? '✓' : '✗';
          tag.style.color = ok ? 'var(--accent)' : 'var(--primary)';
          card.appendChild(tag);
        };
        truthZone.querySelectorAll('.cardlet').forEach(c => mark(c, c.dataset.lie === '0'));
        lieZone.querySelectorAll('.cardlet').forEach(c => mark(c, c.dataset.lie === '1'));

        const total = rounds.length;
        btnNext.textContent = (roundIndex === total - 1) ? 'Finish' : 'Next round';
        btnNext.style.display = 'inline-flex';
      });

      btnNext.addEventListener('click', () => {
        const total = rounds.length;
        if (roundIndex >= total - 1) {
          // Finale view
          if (finaleBox) {
            finaleBox.style.display = 'block';
          }
          btnNext.style.display = 'none';
          btnSubmit.disabled = true;
          roundBadge.textContent = `Completed ${total} / ${total}`;
        } else {
          roundIndex += 1;
          renderRound(roundIndex);
        }
      });

      if (finaleBox) {
        const replay = el.querySelector('#ttal-replay');
        if (replay) replay.addEventListener('click', () => {
          finaleBox.style.display = 'none';
          roundIndex = 0;
          renderRound(roundIndex);
        });
      }

      // Init
      wireZone(truthZone); wireZone(lieZone); wirePool();
      renderRound(roundIndex);
    })();
  </script>


  <script>
    (() => {
      const root = document.querySelector('#fw-gallery');
      if (!root) return;
      const track = root.querySelector('.fw-track');
      const slides = Array.from(root.querySelectorAll('.fw-slide'));
      const prevBtn = root.querySelector('[data-prev]');
      const nextBtn = root.querySelector('[data-next]');
      const dotsBox = root.querySelector('.fw-dots');
      const titleEl = root.querySelector('.fw-title');
      const blurbEl = root.querySelector('.fw-blurb');
      const viewport = root.querySelector('.fw-viewport');

      dotsBox.innerHTML = slides.map((_, i) =>
        `<button type="button" class="fw-dot" aria-label="Go to slide ${i + 1}"></button>`
      ).join('');
      const dots = Array.from(dotsBox.children);

      let i = 0;
      function update() {
        track.style.transform = `translateX(-${i * 100}%)`;
        titleEl.textContent = slides[i].dataset.title || '';
        blurbEl.textContent = slides[i].dataset.blurb || '';
        prevBtn.disabled = i === 0;
        nextBtn.disabled = i === slides.length - 1;
        dots.forEach((d, k) => d.setAttribute('aria-current', k === i ? 'true' : 'false'));
      }
      prevBtn.addEventListener('click', () => { if (i > 0) { i--; update(); } });
      nextBtn.addEventListener('click', () => { if (i < slides.length - 1) { i++; update(); } });
      dots.forEach((d, k) => d.addEventListener('click', () => { i = k; update(); }));

      viewport.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') nextBtn.click();
        if (e.key === 'ArrowLeft') prevBtn.click();
      });
      let startX = null;
      viewport.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, { passive: true });
      viewport.addEventListener('touchend', (e) => {
        if (startX == null) return;
        const dx = e.changedTouches[0].clientX - startX;
        if (Math.abs(dx) > 40) (dx < 0 ? nextBtn : prevBtn).click();
        startX = null;
      });

      update();
    })();
  </script>
  <script>
    (() => {
      const root = document.querySelector('#fw-gallery');
      if (!root) return;

      const track = root.querySelector('.fw-track');
      const slides = Array.from(root.querySelectorAll('.fw-slide'));
      const prevBtn = root.querySelector('[data-prev]');
      const nextBtn = root.querySelector('[data-next]');
      const dotsBox = root.querySelector('.fw-dots');
      const titleEl = root.querySelector('.fw-title');
      const blurbEl = root.querySelector('.fw-blurb');
      const viewport = root.querySelector('.fw-viewport');

      // build dots (unchanged)
      dotsBox.innerHTML = slides.map((_, k) => `<button type="button" class="fw-dot" aria-label="Go to slide ${k + 1}"></button>`).join('');
      const dots = Array.from(dotsBox.children);

      let i = 0;

      /* === NEW: size viewport to active slide's image === */
      function sizeToActive() {
        const fig = slides[i];
        const img = fig.querySelector('img');
        const cap = fig.querySelector('figcaption');

        const measure = () => {
          // compute height from image’s intrinsic ratio at current width
          const w = viewport.clientWidth || img.clientWidth || 1;
          let h;
          if (img.naturalWidth && img.naturalHeight) {
            h = img.naturalHeight * (w / img.naturalWidth);
          } else {
            // fallback if intrinsic size not ready yet
            h = img.getBoundingClientRect().height || fig.querySelector('.fw-imgWrap').getBoundingClientRect().height;
          }
          const capH = cap ? cap.getBoundingClientRect().height : 0;
          viewport.style.height = Math.ceil(h + capH) + 'px';
        };

        if (!img.complete) {
          img.addEventListener('load', measure, { once: true });
        } else {
          // let layout settle before measuring
          requestAnimationFrame(measure);
        }
      }

      function update() {
        track.style.transform = `translateX(-${i * 100}%)`;
        titleEl.textContent = slides[i].dataset.title || '';
        blurbEl.textContent = slides[i].dataset.blurb || '';
        prevBtn.disabled = i === 0;
        nextBtn.disabled = i === slides.length - 1;
        dots.forEach((d, k) => d.setAttribute('aria-current', k === i ? 'true' : 'false'));
        sizeToActive();                 // ← call the new sizing helper
      }

      prevBtn.addEventListener('click', () => { if (i > 0) { i--; update(); } });
      nextBtn.addEventListener('click', () => { if (i < slides.length - 1) { i++; update(); } });
      dots.forEach((d, k) => d.addEventListener('click', () => { i = k; update(); }));

      // keyboard & swipe (unchanged)
      viewport.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') nextBtn.click();
        if (e.key === 'ArrowLeft') prevBtn.click();
      });
      let startX = null;
      viewport.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, { passive: true });
      viewport.addEventListener('touchend', (e) => {
        if (startX == null) return;
        const dx = e.changedTouches[0].clientX - startX;
        if (Math.abs(dx) > 40) (dx < 0 ? nextBtn : prevBtn).click();
        startX = null;
      });

      // Resize the window → re-fit current slide
      window.addEventListener('resize', () => sizeToActive());

      // initial render
      update();
    })();
  </script>


</body>

</html>